# Вакансии и Работодатели с HH.ru

Этот проект позволяет получить данные о компаниях и вакансиях с сайта HH.ru, сохранить их в базе данных PostgreSQL и управлять этими данными с помощью различных запросов.

Выбраны 10 интересных компаний, от которых получены данные о вакансиях по API.
Список находится в файле config.py. 
По умолчанию, список ID компаний - [1740, 3529, 64174, 2180, 15478, 3776, 8620, 3529, 78638, 1440683].

Склонируйте репозиторий:
git clone git@github.com:RViktorV/cr_5_database.git

Установите Poetry, если он еще не установлен:
pip install poetry

Установите зависимости и создайте виртуальное окружение:
poetry install

Настройте базу данных PostgresSQL:
Для хранения конфигурации подключения к базе данных PostgresSQL 
Создан файл database.ini с содержимым:

[postgresql]
host=localhost
user=myuser
password=mypassword
port=5432

Использование:
Активируйте виртуальное окружение:
poetry shell

Запустите скрипт для получения данных и загрузки их в базу данных:
python main.py

Следуйте инструкциям в программе для работы с данными.

# Файлы

**main.py:** Основной скрипт для запуска программы.
**config.py:** Модуль для загрузки конфигурации базы данных.
**database.ini:** Файл конфигурации базы данных.
**src/utils.py:** Вспомогательные функции для работы с HH.ru API и базой данных.
**src/class_db_manager.py:** Класс DBManager для выполнения запросов к базе данных.


# В классе DBManager реализованы методы:
 - **get_companies_and_vacancies_count** - Получает список всех компаний, их ID и количество вакансий у каждой компании.
 - **get_all_vacancies** - Получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
 - **get_vacancies_by_company_id** - Получает список вакансий по ID компании.
 - **get_avg_salary** - Получает среднюю зарплату по вакансиям.
 - **get_vacancies_with_higher_salary** - Получает список всех вакансий, у которых зарплата выше средней по всем вакансиям.
 - **get_vacancies_with_keyword** - Получает список всех вакансий, в названии которых содержатся переданные в метод слова.
 - **print_select** - Метод выводит результаты запроса в виде таблицы.
 - **print_companies_and_vacancies_count** - Метод выводит компании и количество вакансий в виде таблицы.
 - **print_all_vacancies** - Метод выводит в виден таблицы список всех вакансий с указанием названия компании,
        названия вакансии и зарплаты и ссылки на вакансию.
 - **print_vacancies_with_higher_salary** - Метод выводит в виден таблицы вакансий, у которых зарплата выше средней по всем вакансиям.
 - **print_vacancies_with_keyword** - Метод выводит в виден таблицы вакансий, в названии которых содержатся переданные в метод ключевое слово.
 - **print_vacancies_by_company_id** - Метод выводит в виде таблицы вакансии указанной компании по ее ID.
 - **close** - Закрывает соединение с базой данных.

# Примеры использования программы:
Запустите скрипт для получения данных и загрузки их в базу данных:
python main.py

Следуйте инструкциям в программе для работы с данными.

1 - Вывести данные о работодателях на экран
2 - Вывести данные о вакансиях на экран
3 - Вывести список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию
4 - Вывести среднюю зарплату по вакансиям
5 - Вывести список всех вакансий, у которых зарплата выше средней по всем вакансиям
6 - Вывести список всех вакансий, в названии которых содержатся переданные слова
7 - Вывести список всех вакансий по id компании
0 - Выход

Автор: Ржавых Виктор при помощи преподавателей SkyPro и Google.